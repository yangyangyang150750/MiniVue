{
  "version": 3,
  "sources": ["../src/effect.ts", "../../shared/src/index.ts", "../src/reactiveEffect.ts", "../src/baseHandler.ts", "../src/reactive.ts", "../src/ref.ts", "../src/computed.ts", "../src/watch.ts"],
  "sourcesContent": ["import { DirtyLevel } from \"./constants\"\r\n\r\n// \u6E05\u9664effect\u7684\u4F9D\u8D56\r\nconst preCleanEffect = (effect)=>{\r\n    // \u8BB0\u5F55\u4E0E\u5F53\u524Deffect\u7ED1\u5B9A\u7684\u5C5E\u6027\u7684 \u6570\u7EC4deps \u957F\u5EA6\u6E05\u96F6\r\n    effect._depsLength=0\r\n    // \u5F53\u524Deffect\u6267\u884C\u6B21\u6570+1\r\n    effect._trackId++\r\n}\r\n\r\n// \u6E05\u9664\u5F53\u524Deffect\u591A\u4F59\u7684\u5C5E\u6027\u4F9D\u8D56\r\nconst postCleanEffect = (effect)=>{\r\n    // \u65E7\uFF1A[flag,name,a,b,c]\r\n    // \u65B0\uFF1A[flag]       => effect._depsLength =1\r\n\r\n    // \u5224\u65AD\u662F\u5426\u6709\u591A\u4F59\u4F9D\u8D56\r\n    if (effect.deps.length > effect._depsLength) {\r\n        // \u82E5\u6709\r\n        // \u5FAA\u73AF\u5220\u9664\r\n        for(let i =effect._depsLength;i<effect.deps.length;i++ ){\r\n            // \u8C03\u7528\u5220\u9664effect\u65B9\u6CD5\r\n            cleanDepEffect(effect.deps[i],effect)\r\n        }\r\n        //\u66F4\u65B0\u4F9D\u8D56\u5217\u8868\u957F\u5EA6\r\n        effect.deps.length = effect._depsLength\r\n    }\r\n}\r\n\r\n// effect \u65B9\u6CD5\r\nexport function effect(fn,options?) {\r\n    // fn\u4E3A\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\r\n    // options\u4E3A\u914D\u7F6E\u5BF9\u8C61\uFF0C\u4F8B\u5982watch\u91CC\u7684lazy\r\n    // \u4F8B\uFF1Aeffect(()=>{\r\n    //      document.querySelector('#id').innerHTML=proxyObj.name\r\n    //      })\r\n    \r\n    // \u521B\u5EFA\u54CD\u5E94\u5F0Feffect\u5BF9\u8C61\r\n    // fn\u4E3A\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\r\n    // \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662Fscheduler \u5F53fn\u6240\u4F9D\u8D56\u7684\u53D8\u91CF\u53D1\u751F\u53D8\u5316\u65F6\u7684\u56DE\u8C03\u51FD\u6570\r\n    // \u4F8B\uFF1A\r\n    // \u5728\u4E0A\u9762\u7684\u4F8B\u5B50\u4E2D\uFF0Cfn\u4F9D\u8D56\u7684\u53D8\u91CF\u662FproxyObj.name\r\n    // \u5F53proxyObj.name \u540E\u7EED\u6539\u53D8\u65F6 \u4F1A\u89E6\u53D1_effect\u7684scheduler\u56DE\u8C03\r\n    const _effect=new ReactiveEffect(fn,()=>{\r\n        // \u9ED8\u8BA4\u56DE\u8C03\u65B9\u6CD5\r\n        _effect.run()\r\n    })\r\n\r\n    // \u5224\u65AD\u7528\u6237\u662F\u5426\u4F20\u5165scheduler\r\n    if (options) {\r\n        // \u82E5\u4F20\u5165\r\n        // \u5229\u7528assign\u65B9\u6CD5 \u8986\u76D6\u9ED8\u8BA4\u7684scheduler\r\n        Object.assign(_effect,options)\r\n    }\r\n\r\n    // effect\u4F1A\u9ED8\u8BA4\u6267\u884C\u4E00\u6B21\r\n    _effect.run()\r\n\r\n    // \u5C06run\u65B9\u6CD5\u66B4\u9732\r\n    let runner = _effect.run.bind(_effect)\r\n    runner.effect = _effect\r\n    // \u5C06\u54CD\u5E94\u5F0Feffect\u5BF9\u8C61\u8FD4\u56DE\r\n    return runner\r\n}\r\n\r\n// \u5168\u5C40effect\r\nexport let activeEffect\r\n\r\n// \u8BB0\u5F55\u7236effect\r\n// \u53EF\u7528\u4E8E\u5904\u7406effect\u5D4C\u5957\u7684\u60C5\u51B5\r\nlet lastEffect \r\n\r\n\r\n\r\n// \u5C06dep\u4F9D\u8D56\u8868\u4E2D\u7684\u5F53\u524Deffect\u6E05\u9664\r\nconst cleanDepEffect=(dep,effect)=>{\r\n    // \u6E05\u9664\u5F53\u524Deffect\r\n    dep.delete(effect)\r\n    // \u82E5\u5F53\u524Ddep\u4F9D\u8D56\u8868\u4E3A\u7A7A \u5219\u5220\u9664\u6B64\u8868\r\n    if (dep.size ===0) {\r\n        dep.cleanup()\r\n    }\r\n}\r\n// \u521B\u5EFA\u54CD\u5E94\u5F0Feffect\u5BF9\u8C61\r\nexport class ReactiveEffect{\r\n    // \u6807\u8BB0\u5F53\u524D\u662F\u5426\u5728\u8FD0\u884C\r\n    _running=0      // \u7528\u4E8E\u907F\u514D\u6B7B\u5FAA\u73AF\r\n    // \u8BB0\u5F55\u5F53\u524Deffect\u6267\u884C\u4E86\u51E0\u6B21\r\n    _trackId = 0\r\n    // \u8BB0\u5F55\u4E0E\u5F53\u524Deffect\u7ED1\u5B9A\u7684\u5C5E\u6027\r\n    deps=[]\r\n    _depsLength=0\r\n    // \u8868\u793A\u662F\u5426\u662F\u810F\u7684 \u5373\u662F\u5426\u9700\u8981\u91CD\u65B0\u6267\u884C\u8BA1\u7B97\u5C5E\u6027\r\n    _dirtyLevel = DirtyLevel.Dirty  // \u9ED8\u8BA4\u4E3A\u810F\u6570\u636E\r\n    // \u6807\u8BC6\u5F53\u524Deffect\u662F\u5426\u4E3A\u54CD\u5E94\u5F0F\r\n    public active = true \r\n    // \u6784\u9020\u51FD\u6570\r\n    constructor(public fn,public scheduler){\r\n    }\r\n    // \u83B7\u53D6\u5F53\u524D\u662F\u5426\u4E3A\u810F\u6570\u636E\u65B9\u6CD5\r\n    public get dirty(){\r\n        return this._dirtyLevel === DirtyLevel.Dirty\r\n    }\r\n    // \u8BBE\u7F6E\u5F53\u524D\u4E3A\u810F\u6570\u636E\u65B9\u6CD5\r\n    public set dirty(v){\r\n        this._dirtyLevel = v?DirtyLevel.Dirty:DirtyLevel.NoDirty\r\n    }\r\n    // run\u65B9\u6CD5\r\n    run(){\r\n        // \u6BCF\u6B21\u8FD0\u884C\u540E \u5F53\u524D\u6570\u636E\u5C31\u4E3A\u5E72\u51C0\u6570\u636E\r\n        this._dirtyLevel=DirtyLevel.NoDirty\r\n        // \u5224\u65AD\u5F53\u524Deffect\u662F\u5426\u4E3A\u54CD\u5E94\u5F0F\r\n        if (!this.active) {\r\n            // \u82E5\u4E0D\u662F\u54CD\u5E94\u5F0F\r\n            // \u76F4\u63A5\u6267\u884C\u51FD\u6570\u5373\u53EF\r\n            return this.fn()\r\n        }\r\n        // \u82E5\u662F\u54CD\u5E94\u5F0F\r\n        try {\r\n            // 1\u3001\u5C06\u4E0A\u4E00\u4E2Aeffect\u4F5C\u4E3A\u7236effect\r\n            lastEffect = activeEffect\r\n            // 2\u3001\u5C06\u5F53\u524Deffect\u6302\u8F7D\u81F3\u5168\u5C40\r\n            activeEffect=this\r\n            // 3\u3001\u6E05\u9664\u5F53\u524Deffect\u7684\u4F9D\u8D56\r\n            preCleanEffect(this)\r\n            // 4\u3001\u6267\u884Cfn\u65B9\u6CD5\r\n            this._running++\r\n            return this.fn()\r\n        } finally{\r\n            postCleanEffect(this)\r\n            // \u5C06\u7236effect\u6302\u8F7D\u81F3\u5168\u5C40\r\n            activeEffect=lastEffect\r\n            this._running--\r\n        }\r\n    }\r\n    // stop\u65B9\u6CD5\r\n    stop(){\r\n        if (this.active) {\r\n            this.active=false\r\n            preCleanEffect(this)\r\n            postCleanEffect(this)\r\n        }\r\n    }\r\n}\r\n\r\n// \u4F9D\u8D56\u6536\u96C6\r\nexport const trackEffect = (effect,dep)=>{\r\n    // \u53C2\u6570effect \u4E3A\u5F53\u524Deffect\r\n    // \u53C2\u6570dep \u4E3A\u5C5E\u6027\u4E0Eeffect\u7684\u6620\u5C04\u8868\r\n\r\n    /*\r\n        \u4F18\u5316\u540E \r\n        \u5F53effect\u4E2D\u91CD\u590D\u51FA\u73B0\u67D0\u4E00\u5C5E\u6027\u65F6\r\n        \u53EF\u4EE5\u907F\u514D\u540C\u4E00\u5C5E\u6027 \u591A\u6B21\u6536\u96C6\u540C\u4E00effect\r\n    */\r\n    // \u4F18\u5316\u540E\uFF1A\r\n    if (dep.get(effect) !== effect._trackId) {\r\n        // \u82E5\u662F\u7B2C\u4E00\u6B21\u6536\u96C6\u4F9D\u8D56 \r\n        // dep.get(effect) \u4E3Aundefined\r\n\r\n        // 1\u3001\u6620\u5C04\u8868\u8BB0\u5F55\u5F53\u524Deffect\u4EE5\u53CA\u5176\u6267\u884C\u6B21\u6570\r\n        dep.set(effect,effect._trackId)     // \u66F4\u65B0id\r\n\r\n        // 2\u3001\u5F53\u524Deffect\u8BB0\u5F55\u4E0E\u5176\u7ED1\u5B9A\u7684\u5C5E\u6027\u7684dep\r\n        // * * * * * \u7B80\u6613diff\u7B97\u6CD5 * * * * *\r\n        // 2-1 \u83B7\u53D6\u65E7dep\u503C\r\n        let oldDep =effect.deps[effect._depsLength]\r\n        // 2-2 \u5224\u65AD\u65B0\u65E7dep\u503C\u662F\u5426\u76F8\u540C\r\n        if (oldDep != dep) {\r\n            // \u82E5\u4E0D\u540C\r\n            // 2-3 \u5224\u65AD\u65E7dep\u662F\u5426\u6709\u503C\r\n            if (oldDep) {\r\n                // \u82E5\u6709\u503C \u5219\u5220\u9664\u65E7dep\r\n                cleanDepEffect(oldDep,effect)\r\n            }\r\n            // 2-4 \u66FF\u6362\u65B0dep\r\n            effect.deps[effect._depsLength++]= dep\r\n        }else{\r\n            // \u82E5\u76F8\u540C\r\n            effect._depsLength++\r\n        }\r\n    } \r\n\r\n    // \u4F18\u5316\u524D\uFF1A\r\n    // 1\u3001\u6620\u5C04\u8868\u8BB0\u5F55\u5F53\u524Deffect\u4EE5\u53CA\u5176\u6267\u884C\u6B21\u6570\r\n    // dep.set(effect,effect._trackId)\r\n    // 2\u3001\u5F53\u524Deffect\u8BB0\u5F55\u4E0E\u5176\u7ED1\u5B9A\u7684\u5C5E\u6027\u7684dep\r\n    // effect.deps[effect._depsLength++]=dep  \r\n}\r\n\r\n// \u6FC0\u6D3B\u4F9D\u8D56\r\nexport const triggerEffects = (dep)=>{\r\n    // \u53C2\u6570dep\u4E3A\u5F53\u524D\u5C5E\u6027\u7684effect\u4F9D\u8D56\r\n    // \u6B64\u65F6 \u8BA9\u8FD9\u4E9Beffect\u4F9D\u6B21\u6267\u884C\u5C31\u53EF\r\n    for(let effect of dep.keys()){\r\n        // \u5224\u65AD\u5F53\u524Deffect\u662F\u5426\u4E3A\u810F\r\n        if (effect._dirtyLevel < DirtyLevel.Dirty) {\r\n            // \u82E5\u662F\u5E72\u51C0\u6570\u636E\uFF0C \u5219\u5C06\u5176\u53D8\u4E3A\u810F\r\n            effect._dirtyLevel = DirtyLevel.Dirty\r\n        }\r\n\r\n        // \u8C03\u7528effect\u7684\u56DE\u8C03\u65B9\u6CD5\r\n        if (effect.scheduler) {\r\n            // \u5F53\u524Deffect\u6267\u884C\u5B8C\u6BD5 \u624D\u53EF\u6267\u884C\r\n            if (!effect._running) {\r\n                effect.scheduler() \r\n            }\r\n        }\r\n    }\r\n}", "import { ReactiveFlags } from \"packages/reactivity/src/constants\"\r\n\r\nexport function isObject (value:any) {\r\n    return typeof value === 'object'&& value!=null\r\n}\r\n\r\nexport function isFunction(value){\r\n    return typeof value === 'function'\r\n}\r\n\r\nexport function isReactive(value) {\r\n    return !!(value && value[ReactiveFlags.IS_REACTIVE])\r\n}", "import { activeEffect, effect, trackEffect, triggerEffects } from \"./effect\";\r\n\r\n// \u521B\u5EFA\u6620\u5C04\u8868\r\nconst targetMap = new WeakMap()\r\n// \u6620\u5C04\u8868\u7684\u7ED3\u6784\r\n// targetMap:WeakMap{\r\n    // Key:target1 => Value:Map{\r\n        // Key:key1 => Value:Map{\r\n            // effect1,effect2...\r\n        // },\r\n        // Key:key2 => Value:Map{\r\n            // effect1,effect2...\r\n        // }\r\n    // },\r\n    // Key:target2 => Value:Map{\r\n        // Key:key1 => Value:Map{\r\n            // effect1,effect2...\r\n        // },\r\n        // Key:key2 => Value:Map{\r\n            // effect1,effect2...\r\n        // }\r\n    // },\r\n    // ...\r\n// }\r\n\r\n// \u521B\u5EFA\u4F9D\u8D56\u8868\u51FD\u6570\r\nexport const createDep = (cleanup)=>{\r\n    let dep:any =  new Map()\r\n    // \u7ED9\u5F53\u524D\u5C5E\u6027\u5BF9\u5E94\u7684\u4F9D\u8D56\u8868 \u7ED1\u5B9Acleanup\u5C5E\u6027\r\n    dep.cleanup = cleanup\r\n    return dep\r\n}\r\n\r\n// \u4F9D\u8D56\u6536\u96C6\r\nexport function track(target,key) {\r\n    // \u5148\u5224\u65AD\u662F\u5426\u662F\u5728effect\u4E2D\u8BFB\u53D6\u6B64\u5C5E\u6027\r\n    // \u53EA\u6709\u5728effect\u4E2D\u8BFB\u53D6\u6B64\u5C5E\u6027 \u624D\u4F1A\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\r\n    if (activeEffect) {\r\n        // 1\u3001\u67E5\u770B\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u5DF2\u7ECF\u7F13\u5B58\r\n        let desMap =targetMap.get(target)   \r\n        // 1-1 \u82E5\u672A\u7F13\u5B58 \u5219\u6DFB\u52A0\u7F13\u5B58\r\n        if (!desMap) {\r\n            // \u6DFB\u52A0\u7F13\u5B58\r\n            targetMap.set(target,(desMap=new Map()))\r\n        }\r\n\r\n        // 2\u3001\u67E5\u770B\u5F53\u524D\u5C5E\u6027\u662F\u5426\u7F13\u5B58\u8FC7\r\n        let dep = desMap.get(key)\r\n        // 2-1 \u82E5\u672A\u7F13\u5B58 \u5219\u6DFB\u52A0\u7F13\u5B58\r\n        if (!dep) {\r\n            desMap.set(key,(dep = createDep(()=>desMap.delete(key)))) //\u540E\u9762\u7528\u4E8E\u6E05\u9664\u4E0D\u9700\u8981\u7684\u5C5E\u6027\r\n        }\r\n\r\n        // \u5C06\u5F53\u524Deffect \u52A0\u5165 \u6B64\u5C5E\u6027\u4E2D\r\n        // \u4F9D\u8D56\u6536\u96C6\r\n        trackEffect(activeEffect,dep)\r\n    }\r\n}\r\n\r\n// \u89E6\u53D1\u4F9D\u8D56\r\nexport function trigger(target,key,newValue,oldValue) {\r\n    // 1\u3001\u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u4E0Eeffect\u5B58\u5728\u6620\u5C04\r\n    // \u5373 \u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u5B58\u4E8E\u6620\u5C04\u8868\u4E2D\r\n    let depsMap = targetMap.get(target)\r\n    if (!depsMap) {\r\n        // \u82E5\u5F53\u524D\u5BF9\u8C61\u4E0D\u5728\u6620\u5C04\u8868\u4E2D \u8BF4\u660E\u4E0D\u5B58\u5728\u6620\u5C04\r\n        // \u6CA1\u6709\u5BF9\u5E94\u4F9D\u8D56 \u76F4\u63A5\u8FD4\u56DE\r\n        return\r\n    }\r\n\r\n    // 2\u3001\u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u7684key\u5C5E\u6027\u662F\u5426\u4E0Eeffect\u5B58\u5728\u6620\u5C04\r\n    // \u5373 \u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u7684key\u5C5E\u6027\u662F\u5426\u5728desMap\u4E2D\r\n    let dep = depsMap.get(key)\r\n    if (dep) {\r\n        // \u82E5\u5728desMap\u4E2D\r\n        // \u6B64\u65F6dep\u4E2D \u5373\u4E3A\u5F53\u524D\u5C5E\u6027\u4F9D\u8D56\u7684effect\r\n        // \u8C03\u7528\u6FC0\u6D3B\u4F9D\u8D56\u65B9\u6CD5\r\n        triggerEffects(dep)\r\n    }\r\n}", "import { isObject } from \"@vue/shared\";\r\nimport { activeEffect } from \"./effect\";\r\nimport { track, trigger } from \"./reactiveEffect\";\r\nimport { reactive } from \"./reactive\";\r\nimport { ReactiveFlags } from \"./constants\";\r\n\r\n\r\n// \u4EE3\u7406\u903B\u8F91\r\nexport const mutableHandlers:ProxyHandler<any>= {\r\n    // \u8BFB\u53D6\u5BF9\u8C61\u5C5E\u6027\u65F6\u7684\u56DE\u8C03\u65B9\u6CD5\r\n    get(target,key,receiver){    //receiver \u6307\u5411\u4EE3\u7406\u540E\u7684\u5BF9\u8C61\r\n        if (key ===ReactiveFlags.IS_REACTIVE ) {\r\n            return true\r\n        }\r\n\r\n        // \u4F9D\u8D56\u6536\u96C6\r\n        track(target,key)\r\n          \r\n        // Reflect\u4F5C\u7528 => \u7528\u4E8E\u4FEE\u6539this\u6307\u5411\r\n        // \u82E5target[key] \u662F\u4E00\u4E2Agetter\u51FD\u6570\r\n        // \u53EF\u4EE5\u8BA9\u5176\u4E2D\u7684this \u6307\u5411receiver\r\n        let res = Reflect.get(target,key,receiver)\r\n\r\n        // \u5B9E\u73B0\u9012\u5F52\u4EE3\u7406\r\n        if (isObject(res)) {\r\n            res=reactive(res)\r\n        }\r\n        return res\r\n    },\r\n    // \u8BBE\u7F6E\u5BF9\u8C61\u5C5E\u6027\u65F6\u7684\u56DE\u8C03\u65B9\u6CD5\r\n    set(target,key,value,receiver){     //receiver \u6307\u5411\u4EE3\u7406\u540E\u7684\u5BF9\u8C61\r\n\r\n        // 1\u3001\u83B7\u53D6\u65E7\u503C\r\n        let oldValue = target[key]\r\n\r\n        // Reflect\u4F5C\u7528 => \u7528\u4E8E\u4FEE\u6539this\u6307\u5411\r\n        // \u82E5target[key] \u662F\u4E00\u4E2Asetter\u51FD\u6570\r\n        // \u53EF\u4EE5\u8BA9\u5176\u4E2D\u7684this \u6307\u5411receiver\r\n        let result=Reflect.set(target,key,value,receiver)\r\n\r\n        // 2\u3001\u5224\u65AD\u662F\u5426\u53D1\u751F\u4FEE\u6539 \u5373\u65B0\u65E7\u503C\u662F\u5426\u76F8\u540C\r\n        if (oldValue !== value) {\r\n            // \u82E5\u53D1\u751F\u4FEE\u6539\r\n            // \u89E6\u53D1\u4F9D\u8D56\u66F4\u65B0\r\n            trigger(target,key,value,oldValue)\r\n        }\r\n        \r\n        \r\n        return result\r\n    }\r\n}", "import { isObject } from \"@vue/shared\";\r\nimport { mutableHandlers,  } from \"./baseHandler\";\r\nimport { ReactiveFlags } from \"./constants\";\r\n\r\n\r\n\r\nexport function reactive(target) {\r\n    // \u8C03\u7528\u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61\u65B9\u6CD5 \u7EDF\u4E00\u5904\u7406\r\n    return createReactiveObject(target)\r\n}\r\n\r\n// \u7F13\u5B58 \u5BF9\u8C61 \u4E0E\u5176 \u4EE3\u7406\u5BF9\u8C61 \u7684\u6620\u5C04\r\n// \u7528\u4E8E \u907F\u514D\u91CD\u590D\u521B\u5EFA\u4EE3\u7406\u5BF9\u8C61\r\nconst reactiveMap =new WeakMap()\r\n\r\n// \u521B\u5EFA\u54CD\u5E94\u5F0F\u5BF9\u8C61\u65B9\u6CD5\r\nfunction createReactiveObject(target){\r\n    // * * *\r\n    // \u5224\u65AD\u5F53\u524D\u662F\u5426\u4E3A\u5BF9\u8C61\r\n    // \u82E5\u4E0D\u662F\u5BF9\u8C61 \u76F4\u63A5\u8FD4\u56DE \u4E0D\u505A\u54CD\u5E94\u5F0F\r\n    // \u4F8B\uFF1Areactive(123) => 123\r\n    if (!isObject(target)) {\r\n        return target\r\n    }\r\n\r\n    // \u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u4E3A\u4EE3\u7406\u5BF9\u8C61\r\n    // \u666E\u901A\u5BF9\u8C61\u4E00\u5B9A\u4E3Anull \u800C\u4EE3\u7406\u5BF9\u8C61\u5219\u4F1A\u8FDB\u5165get\u56DE\u8C03\u51FD\u6570\u5185\r\n    // \u6B64\u65F6\u53EF\u4EE5\u5728get\u56DE\u8C03\u51FD\u6570\u5185 \u5904\u7406\u76F8\u5173\u903B\u8F91\r\n    if (target[ReactiveFlags.IS_REACTIVE]) {\r\n        // \u82E5\u5F53\u524D\u5BF9\u8C61\u4E3A\u4EE3\u7406\u5BF9\u8C61\r\n        // \u5219\u76F4\u63A5\u8FD4\u56DE  \u4E0D\u5FC5\u518D\u505A\u4EE3\u7406\r\n        return target\r\n    }\r\n\r\n    // \u5224\u65AD\u5F53\u524D\u5BF9\u8C61 \u662F\u5426\u5DF2\u7ECF\u4EE3\u7406\u8FC7\r\n    // \u5373\uFF1A\u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u662F\u5426\u5728reactiveMap\u7F13\u5B58\u8FC7\r\n    const exitsProxy = reactiveMap.get(target)\r\n    if (exitsProxy) {\r\n        // \u82E5\u7F13\u5B58\u8FC7\r\n        // \u8FD4\u56DE\u5176\u4EE3\u7406\u5BF9\u8C61\r\n        return exitsProxy\r\n    }\r\n\r\n    // \u82E5\u662F\u5BF9\u8C61 \u5219\u5BF9\u5176\u505A\u4EE3\u7406\r\n    // \u666E\u901A\u5BF9\u8C61 => \u4EE3\u7406\u5BF9\u8C61\r\n    // target\uFF1A\u76EE\u6807\u5BF9\u8C61 mutableHandlers\uFF1A\u4EE3\u7406\u903B\u8F91\r\n    let proxy = new Proxy(target,mutableHandlers)\r\n\r\n    // \u4EE3\u7406\u5B8C\u6210\u540E \r\n    // \u5C06\u5F53\u524D\u5BF9\u8C61 \u53CA\u5176 \u4EE3\u7406 \u7F13\u5B58\r\n    reactiveMap.set(target,proxy)\r\n\r\n    return proxy\r\n}\r\n\r\n// \u5C06\u5BF9\u8C61\u8F6C\u6362\u6210\u54CD\u5E94\u5F0F\u5BF9\u8C61\u7684\u65B9\u6CD5\r\nexport function toReactive(obj) {\r\n    return isObject(obj)? reactive(obj) : obj\r\n}\r\n", "import { activeEffect, trackEffect, triggerEffects } from \"./effect\"\r\nimport { toReactive } from \"./reactive\"\r\nimport { createDep } from \"./reactiveEffect\"\r\n\r\n// \u5224\u65AD\u662F\u5426\u4E3Aref\u65B9\u6CD5\r\nexport function isRef(value) {\r\n    return !!(value && value.__v_isRef)\r\n}\r\n\r\n// ref \u65B9\u6CD5\r\nexport const ref =(value)=>{\r\n    // \u8C03\u7528\u521B\u5EFAref\u65B9\u6CD5\r\n    return createRef(value)\r\n}\r\n\r\n// \u521B\u5EFAref\u65B9\u6CD5\r\nconst createRef = (value)=>{\r\n    // \u8FD4\u56DE\u4E00\u4E2ARefImpl\u5B9E\u4F8B\u5BF9\u8C61\r\n    return new RefImpl(value)\r\n}\r\n\r\n// RefImpl \u7C7B\r\nexport class RefImpl{\r\n    // \u8868\u793A\u5F53\u524D\u5BF9\u8C61\u4E3Aref\u5B9E\u4F8B\u5BF9\u8C61\r\n    __v_isRef=true\r\n    // \u7528\u4E8E\u4FDD\u5B58\u5F53\u524Dref\u7684\u503C\r\n    _value = undefined\r\n    // \u4FDD\u5B58\u5F53\u524D\u5BF9\u8C61\u7684\u4F9D\u8D56\r\n    dep\r\n    // \u6784\u9020\u5668\r\n    constructor(public rawValue){\r\n        // \u82E5rawValue \u5219\u5C06\u5176\u8F6C\u6362\u4E3Areactive\u5BF9\u8C61\r\n        this._value=toReactive(rawValue)\r\n    }\r\n    // get\u65B9\u6CD5\r\n    get value(){\r\n        // \u4F9D\u8D56\u6536\u96C6\r\n        trackRefValue(this)\r\n        return this._value\r\n    }\r\n    // set\u65B9\u6CD5\r\n    set value(newValue){\r\n        // \u5224\u65AD\u5F53\u524D\u65B0\u503C\u4E0E\u65E7\u503C\u662F\u5426\u76F8\u540C\r\n        if (newValue !== this.rawValue) {\r\n            // \u4E0D\u540C \u624D\u9700\u8981\u66F4\u65B0\r\n            this.rawValue=newValue  //\u66F4\u65B0\r\n            this._value=newValue\r\n            // \u4F9D\u8D56\u66F4\u65B0\r\n            triggerRefValue(this)\r\n        }\r\n    }\r\n}\r\n\r\n// \u4F9D\u8D56\u6536\u96C6\r\nexport const trackRefValue = (ref)=>{\r\n    // \u53EA\u6709\u5728effect \u4E2D\r\n    // \u624D\u9700\u8981\u4F9D\u8D56\u6536\u96C6\r\n    if (activeEffect) {\r\n        // \u8C03\u7528\u6536\u96C6\u4F9D\u8D56\u65B9\u6CD5\r\n        trackEffect(activeEffect,(ref.dep = ref.dep||createDep(()=>ref.dep=undefined)))\r\n    }\r\n}\r\n\r\n// \u4F9D\u8D56\u66F4\u65B0\r\nexport const triggerRefValue = (ref)=>{\r\n    let dep = ref.dep\r\n    if (dep) {\r\n        // \u8C03\u7528\u4F9D\u8D56\u66F4\u65B0\u65B9\u6CD5\r\n        triggerEffects(dep)\r\n    }\r\n}\r\n\r\n// ObjectRefImpl\u5BF9\u8C61\r\nclass ObjectRefImpl {\r\n    // \u8868\u793A\u5F53\u524D\u5BF9\u8C61\u4E3Aref\u5B9E\u4F8B\u5BF9\u8C61\r\n    public __v_isRef:true\r\n    constructor(public _object,public _key){\r\n    }\r\n    get value(){\r\n        return this._object[this._key]\r\n    }\r\n    set value(newValue){\r\n        this._object[this._key]=newValue\r\n    }\r\n}\r\n\r\n// toRef\r\nexport function toRef(object,key) {\r\n    // \u8FD4\u56DE\u4E00\u4E2AObjectRefImpl\u5BF9\u8C61\r\n    return new ObjectRefImpl(object,key)\r\n}\r\n\r\n// toRefs\r\nexport function toRefs(object){\r\n    // \u4FDD\u5B58\u7ED3\u679C\u5BF9\u8C61\r\n    const res = {}\r\n    // \u5FAA\u73AF\u5F53\u524D\u5BF9\u8C61\r\n    for (let key in object) {\r\n        // \u5BF9\u6BCF\u4E2A\u5C5E\u6027\u90FD\u5305\u88F9\u4E3Aref\r\n        res[key]= toRef(object,key)\r\n    }\r\n    console.log(res);\r\n    \r\n    return res\r\n}\r\n\r\n// proxyRefs\r\nexport function proxyRefs(objectWithRef){\r\n    return new Proxy(objectWithRef,{\r\n        get(target,key,receiver){\r\n            let r = Reflect.get(target,key,receiver)\r\n            return r.__v_isRef?r.value:r    // \u5B9E\u73B0\u81EA\u52A8.value\r\n        },\r\n        set(target,key,value,receiver){\r\n            // \u83B7\u53D6\u65E7\u503C\r\n            let oldValue = target[key]\r\n            // \u5224\u65AD\u65E7\u503C\u662F\u5426\u4E3Aref\r\n            if (oldValue.__v_isRef) {\r\n                // \u82E5\u662Fref\r\n                oldValue.value = value\r\n                return true\r\n            }else{\r\n                // \u5426\u5219\r\n                return Reflect.set(target,key,value,receiver)\r\n            }\r\n        }\r\n    })\r\n}\r\n\r\n", "import { isFunction } from \"@vue/shared\";\r\nimport { ReactiveEffect } from \"./effect\";\r\nimport { trackRefValue, triggerRefValue } from \"./ref\";\r\n\r\nclass ComputedRefImpl{\r\n    // \u4FDD\u5B58\u65E7\u503C\r\n    public _value\r\n    public effect\r\n    // \u4FDD\u5B58\u6B64\u8BA1\u7B97\u5C5E\u6027\u7684\u4F9D\u8D56\r\n    public dep\r\n    // \u6784\u9020\u5668\r\n    constructor(getter,public setter){\r\n        // \u6211\u4EEC\u9700\u8981\u521B\u5EFAeffect \u7528\u4E8E\u7BA1\u7406\u5F53\u524D\u8BA1\u7B97\u5C5E\u6027\u7684dirty\u5C5E\u6027\r\n        this.effect = new ReactiveEffect(\r\n            ()=>getter(this._value),\r\n            ()=>{\r\n                // \u8BA1\u7B97\u5C5E\u6027\u4F9D\u8D56\u7684\u5C5E\u6027\u6539\u53D8\u65F6 \u89E6\u53D1\u6B64\u56DE\u8C03\r\n                // \u4F9D\u8D56\u66F4\u65B0\r\n                triggerRefValue(this) // \u91CD\u65B0\u6267\u884C\u6B64\u8BA1\u7B97\u5C5E\u6027\u7ED1\u5B9A\u7684effect\r\n            }\r\n        )\r\n    }\r\n    get value(){\r\n        // \u53D6\u503C\u65F6\r\n        // \u6536\u96C6\u4F9D\u8D56\r\n        trackRefValue(this)\r\n        // \u5224\u65AD\u5F53\u524D\u8BA1\u7B97\u5C5E\u6027\u662F\u5426\u4E3A\u810F\u6570\u636E\r\n        if (this.effect.dirty) {\r\n            // \u82E5\u662F\u810F\u6570\u636E\r\n            // => \u6267\u884Ceffect,\u7F13\u5B58\u6267\u884C\u7ED3\u679C,\u5E76\u5C06\u7ED3\u679C\u8FD4\u56DE\r\n            this._value = this.effect.run()  // \u6BCF\u6B21run\u65F6\uFF0C\u4F1A\u5C06\u5F53\u524D\u8BA1\u7B97\u5C5E\u6027\u53D8\u4E3A\u5E72\u51C0\u6570\u636E\r\n        }\r\n        // => \u8FD4\u56DE\u7F13\u5B58\u7ED3\u679C\r\n        return this._value\r\n    }\r\n    set value(newValue){\r\n        // \u8C03\u7528ref\u7684setter\u65B9\u6CD5\r\n        this.setter(newValue)\r\n    }\r\n\r\n\r\n}\r\n\r\n// computed\u65B9\u6CD5\r\nexport function computed(getterOrOptions) {\r\n    // \u6CE8\u610F\uFF01\uFF01\r\n    // \u7531\u4E8Ecomputed\u6709\u5BF9\u8C61\u5F0F\u548C\u51FD\u6570\u5F0F\u5199\u6CD5\r\n    // \u6240\u4EE5 \u53C2\u6570\u53EF\u80FD\u4E3A\u51FD\u6570\u6216\u5BF9\u8C61\r\n    // => \u9700\u8981\u5206\u60C5\u51B5\u8BA8\u8BBA\r\n\r\n    // 1\u3001\u5B9E\u73B0getter\u548Csetter\u65B9\u6CD5\r\n    // \u8BB0\u5F55getter\u548Csetter\u65B9\u6CD5\r\n    let getter\r\n    let setter\r\n    // \u6807\u8BC6\u5F53\u524D\u53C2\u6570\u662F\u5426\u4E3A\u51FD\u6570\r\n    let onlyGetter = isFunction(getterOrOptions)\r\n    // \u5224\u65ADonlyGetter\u7684\u503C\r\n    if (onlyGetter) {\r\n        // \u82E5\u5F53\u524D\u53C2\u6570\u4E3A\u51FD\u6570\r\n        getter = getterOrOptions    // \u5F53\u524D\u53C2\u6570\u5373\u4E3Agetter\u65B9\u6CD5\r\n        setter = ()=>{}     // setter\u4E3A\u7A7A\u51FD\u6570\r\n    }else{\r\n        // \u82E5\u5F53\u524D\u53C2\u6570\u4E3A\u5BF9\u8C61\r\n        getter = getterOrOptions.get\r\n        setter = getterOrOptions.set\r\n    }\r\n\r\n    // 2\u3001\u8FD4\u56DE\u8BA1\u7B97\u5C5E\u6027ref\r\n    return new ComputedRefImpl(getter,setter)\r\n}", "import { isFunction, isObject,isReactive } from \"@vue/shared\"\r\nimport { ReactiveEffect } from \"./effect\"\r\nimport { isRef } from \"./ref\"\r\n\r\n// watch\u65B9\u6CD5\r\nexport function watch(source,callBack,options={} as any) {\r\n    // source => \u88AB\u76D1\u63A7\u5BF9\u8C61\r\n    // callBack => \u88AB\u76D1\u63A7\u5BF9\u8C61\u6539\u53D8\u65F6\u7684\u56DE\u8C03\r\n    // options => \u914D\u7F6E\u5BF9\u8C61 \u9ED8\u8BA4\u4E3A\u7A7A\u5BF9\u8C61\r\n\r\n    // watch\u65B9\u6CD5\u672C\u8D28\u4E0A\u4E5F\u662F\u4E00\u4E2Aeffect\r\n    // \u5C06source\u7EF4\u62A4\u6210\u4E00\u4E2A\u53D6\u503C\u5668getter \u5185\u90E8\u503C\u53D8\u5316\u65F6\uFF0C\u89E6\u53D1callBack\u56DE\u8C03\r\n    // \u7C7B\u4F3C\u4E8E new ReactiveEffect(getter,scheduler)\r\n\r\n    // \u8FD4\u56DE\u4E00\u4E2A\u5C01\u88C5\u7684doWatch\u65B9\u6CD5\r\n    // \u4FBF\u4E8E\u540E\u7EED\u5B9E\u73B0watchEffect(\u4E5F\u662F\u57FA\u4E8EdoWatch\u5B9E\u73B0)\r\n    return doWatch(source,callBack,options)\r\n\r\n}\r\n\r\n// watchEffect\u65B9\u6CD5\r\nexport function watchEffect(source,options={} as any) {\r\n    // source => \u88AB\u76D1\u63A7\u5BF9\u8C61\r\n    // options => \u914D\u7F6E\u5BF9\u8C61 \u9ED8\u8BA4\u4E3A\u7A7A\u5BF9\u8C61\r\n\r\n    // watchEffect\u65B9\u6CD5\u672C\u8D28\u4E0A\u4E5F\u662F\u4E00\u4E2Aeffect\r\n    // \u7C7B\u4F3C\u4E8E new ReactiveEffect(getter,getter)\r\n\r\n    // \u8FD4\u56DE\u4E00\u4E2A\u5C01\u88C5\u7684doWatch\u65B9\u6CD5\r\n    return doWatch(source,null,options) //watchEffect\u65B9\u6CD5\u6CA1\u6709\u56DE\u8C03\u53C2\u6570\r\n}\r\n\r\n// \u904D\u5386\u65B9\u6CD5\r\nfunction traverse(source,depth,currentDepth=0,seen=new Set()){\r\n    // \u5224\u65AD\u662F\u5426\u4E3A\u5BF9\u8C61\r\n    if (!isObject(source)) {\r\n        // \u5982\u679C\u4E0D\u662F\u5BF9\u8C61 \u65E0\u9700\u904D\u5386\r\n        return source\r\n    }\r\n\r\n    // \u5224\u65AD\u662F\u5426\u4E3A\u6DF1\u5EA6\u76D1\u89C6\r\n    if (depth) {\r\n        // \u82E5\u4E0D\u662F\u6DF1\u5EA6\u76D1\u89C6\r\n        if (currentDepth>=depth) {\r\n            // \u5F53\u524D\u904D\u5386\u6DF1\u5EA6\u8FBE\u5230\u6307\u5B9A\u6DF1\u5EA6\u65F6 \u4E0D\u518D\u904D\u5386\r\n            return source\r\n        }\r\n        currentDepth++\r\n    }\r\n\r\n    // \u5224\u65AD\u662F\u5426\u904D\u5386\u8FC7\u6B64\u5BF9\u8C61\r\n    // \u7528\u4E8E\u907F\u514D\u5FAA\u73AF\u904D\u5386\r\n    if (seen.has(source)) {\r\n        // \u82E5\u904D\u5386\u8FC7\r\n        // \u76F4\u63A5\u8FD4\u56DE\r\n        return source\r\n    }\r\n\r\n    // \u9012\u5F52\u904D\u5386\r\n    for (const key in source) {\r\n        traverse(source[key],depth,currentDepth,seen)\r\n    }\r\n}\r\n\r\n// doWatch\u65B9\u6CD5\r\nfunction doWatch(source,callBack,{deep,immediate}) {\r\n    // \u56E0\u4E3Awatch\u65B9\u6CD5\u672C\u8D28\u4E0A\u4E5F\u662Feffect \u6240\u4EE5\u6211\u4EEC\u4E5F\u9700\u8981\u521B\u5EFAReactiveEffect\r\n    // \u4E3A\u6B64\u6211\u4EEC\u9700\u8981\u521B\u5EFA getter\u548Cscheduler\r\n\r\n    // 1\u3001\u521B\u5EFAgetter\r\n    // \u4E3A\u4E86\u5B9E\u73B0\u5C06source\u5185\u7684\u5C5E\u6027\u4E0E\u6240\u5728effect\u7ED1\u5B9A\r\n    // => getter\u65B9\u6CD5\u9700\u8981\u904D\u5386\u5F53\u524Dsource\r\n\r\n    const reactiveGetter = (source)=>traverse(source,deep===false?1:undefined)\r\n    // \u4EA7\u751F\u4E00\u4E2A\u53EF\u4EE5\u7ED9ReactiveEffect\u4F7F\u7528\u7684getter\r\n    // \u80FD\u591F\u8BFB\u53D6source\u5185\u7684\u5C5E\u6027 \u4ECE\u800C\u4E0E\u6240\u5728effect\u7ED1\u5B9A\r\n    let getter \r\n    // \u5224\u65AD\u5F53\u524D\u5BF9\u8C61\u7C7B\u578B\r\n    if (isReactive(source)) {\r\n        // \u82E5\u662F\u54CD\u5E94\u5F0F\u5BF9\u8C61 \r\n        getter = ()=>reactiveGetter(source) //\u9012\u5F52\u904D\u5386\u6B64\u5BF9\u8C61\r\n    }else if (isRef(source)) {\r\n        // \u82E5\u662Fref\u5BF9\u8C61\r\n        getter = ()=>source.value   // \u8BBF\u95EE.value\r\n    }else if (isFunction(source)) {\r\n        // \u82E5\u662F\u51FD\u6570\r\n        getter = source     //\u5F53\u524Dsource\u5C31\u662Fsetter\r\n    }\r\n\r\n    // \u5C06\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\u5305\u88F9\r\n    let clean ;\r\n    // \u521B\u5EFAonCleanup\u65B9\u6CD5\r\n    function onCleanup(fn) {\r\n        // fn\u4E3A\u7528\u6237\u4F20\u5165\u7684\u51FD\u6570\r\n        clean = ()=>{\r\n            // 1\u3001\u6267\u884Cfn\r\n            fn()\r\n            // 2\u3001\u6E05\u9664\u81EA\u8EAB\r\n            clean=undefined\r\n        }\r\n    }\r\n    // 2\u3001\u521B\u5EFAscheduler\r\n    let oldValue\r\n    let scheduler = ()=>{\r\n        // \u5224\u65AD\u662F\u5426\u6709\u56DE\u8C03\r\n        // \u7528\u4E8E\u65B9\u4FBF\u662Fwatch \u8FD8\u662F watchEffect\r\n        if (callBack) {\r\n            // \u6267\u884Ceffect => \u6267\u884Cgetter\u65B9\u6CD5 \u83B7\u53D6\u65B0\u503C\r\n            const newValue = effect.run()\r\n            // \u5224\u65AD\u662F\u5426\u5B58\u5728\u6E05\u7406\u51FD\u6570\r\n            if (clean) {\r\n                // \u82E5\u5B58\u5728\r\n                // \u8C03\u7528\u6E05\u7406\u51FD\u6570\r\n                clean() // \u6267\u884C\u56DE\u8C03\u524D \u6267\u884C\u4E0A\u4E00\u6B21\u7684\u6E05\u7406\u64CD\u4F5C\r\n            }\r\n            // \u8C03\u7528\u7528\u6237\u4F20\u5165\u7684\u56DE\u8C03\u65B9\u6CD5\r\n            callBack(oldValue,newValue,onCleanup)\r\n            // \u66F4\u65B0\u65E7\u503C\r\n            oldValue=newValue\r\n        }else{\r\n            // watchEffect\u7684\u903B\u8F91\r\n            // \u6267\u884Ceffect => \u6267\u884Cgetter\u65B9\u6CD5\r\n            effect.run()\r\n        }\r\n    }\r\n\r\n    // \u521B\u5EFAeffect\r\n    let effect =new ReactiveEffect(getter,scheduler)\r\n\r\n    \r\n    // \u5224\u65AD\u662F\u5426\u4F20\u5165callBack\r\n    // \u5373 \u5224\u65AD\u662Fwatch \u8FD8\u662F watchEffect\r\n    if (callBack) {\r\n        // \u82E5\u6709callBack\r\n        // \u5219\u4E3Awatch\r\n\r\n        // \u5224\u65AD\u662F\u5426\u4F20\u5165immediate\u5C5E\u6027\r\n        if (immediate) {\r\n            // \u82E5\u6709immediate\r\n            // \u8BA1\u7B97\u5C5E\u6027effect\u7684\u56DE\u8C03\u7ACB\u5373\u6267\u884C\u4E00\u6B21\r\n            scheduler()\r\n        } else {\r\n            // \u82E5\u6CA1\u6709immediate\r\n            // \u8C03\u7528getter\u65B9\u6CD5 \u83B7\u53D6\u65E7\u503C\r\n            oldValue =effect.run()\r\n        }\r\n    }else{\r\n        // watchEffect\r\n        effect.run()\r\n    }\r\n\r\n    // \u6DFB\u52A0stop\u65B9\u6CD5\r\n    const unwatch = ()=>{\r\n        effect.stop()\r\n    }\r\n\r\n    return unwatch\r\n}"],
  "mappings": ";AAGA,IAAM,iBAAiB,CAACA,YAAS;AAE7B,EAAAA,QAAO,cAAY;AAEnB,EAAAA,QAAO;AACX;AAGA,IAAM,kBAAkB,CAACA,YAAS;AAK9B,MAAIA,QAAO,KAAK,SAASA,QAAO,aAAa;AAGzC,aAAQ,IAAGA,QAAO,aAAY,IAAEA,QAAO,KAAK,QAAO,KAAK;AAEpD,qBAAeA,QAAO,KAAK,CAAC,GAAEA,OAAM;AAAA,IACxC;AAEA,IAAAA,QAAO,KAAK,SAASA,QAAO;AAAA,EAChC;AACJ;AAGO,SAAS,OAAO,IAAG,SAAU;AAahC,QAAM,UAAQ,IAAI,eAAe,IAAG,MAAI;AAEpC,YAAQ,IAAI;AAAA,EAChB,CAAC;AAGD,MAAI,SAAS;AAGT,WAAO,OAAO,SAAQ,OAAO;AAAA,EACjC;AAGA,UAAQ,IAAI;AAGZ,MAAI,SAAS,QAAQ,IAAI,KAAK,OAAO;AACrC,SAAO,SAAS;AAEhB,SAAO;AACX;AAGO,IAAI;AAIX,IAAI;AAKJ,IAAM,iBAAe,CAAC,KAAIA,YAAS;AAE/B,MAAI,OAAOA,OAAM;AAEjB,MAAI,IAAI,SAAQ,GAAG;AACf,QAAI,QAAQ;AAAA,EAChB;AACJ;AAEO,IAAM,iBAAN,MAAoB;AAAA;AAAA,EAavB,YAAmB,IAAU,WAAU;AAApB;AAAU;AAX7B;AAAA,oBAAS;AAET;AAAA;AAAA,oBAAW;AAEX;AAAA,gBAAK,CAAC;AACN,uBAAY;AAEZ;AAAA;AAEA;AAAA;AAAA,SAAO,SAAS;AAAA,EAGhB;AAAA;AAAA,EAEA,IAAW,QAAO;AACd,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAEA,IAAW,MAAM,GAAE;AACf,SAAK,cAAc;AAAA,EACvB;AAAA;AAAA,EAEA,MAAK;AAED,SAAK;AAEL,QAAI,CAAC,KAAK,QAAQ;AAGd,aAAO,KAAK,GAAG;AAAA,IACnB;AAEA,QAAI;AAEA,mBAAa;AAEb,qBAAa;AAEb,qBAAe,IAAI;AAEnB,WAAK;AACL,aAAO,KAAK,GAAG;AAAA,IACnB,UAAE;AACE,sBAAgB,IAAI;AAEpB,qBAAa;AACb,WAAK;AAAA,IACT;AAAA,EACJ;AAAA;AAAA,EAEA,OAAM;AACF,QAAI,KAAK,QAAQ;AACb,WAAK,SAAO;AACZ,qBAAe,IAAI;AACnB,sBAAgB,IAAI;AAAA,IACxB;AAAA,EACJ;AACJ;AAGO,IAAM,cAAc,CAACA,SAAO,QAAM;AAUrC,MAAI,IAAI,IAAIA,OAAM,MAAMA,QAAO,UAAU;AAKrC,QAAI,IAAIA,SAAOA,QAAO,QAAQ;AAK9B,QAAI,SAAQA,QAAO,KAAKA,QAAO,WAAW;AAE1C,QAAI,UAAU,KAAK;AAGf,UAAI,QAAQ;AAER,uBAAe,QAAOA,OAAM;AAAA,MAChC;AAEA,MAAAA,QAAO,KAAKA,QAAO,aAAa,IAAG;AAAA,IACvC,OAAK;AAED,MAAAA,QAAO;AAAA,IACX;AAAA,EACJ;AAOJ;AAGO,IAAM,iBAAiB,CAAC,QAAM;AAGjC,WAAQA,WAAU,IAAI,KAAK,GAAE;AAEzB,QAAIA,QAAO,6BAAgC;AAEvC,MAAAA,QAAO;AAAA,IACX;AAGA,QAAIA,QAAO,WAAW;AAElB,UAAI,CAACA,QAAO,UAAU;AAClB,QAAAA,QAAO,UAAU;AAAA,MACrB;AAAA,IACJ;AAAA,EACJ;AACJ;;;AC9MO,SAAS,SAAU,OAAW;AACjC,SAAO,OAAO,UAAU,YAAW,SAAO;AAC9C;AAEO,SAAS,WAAW,OAAM;AAC7B,SAAO,OAAO,UAAU;AAC5B;AAEO,SAAS,WAAW,OAAO;AAC9B,SAAO,CAAC,EAAE,SAAS,wCAA+B;AACtD;;;ACTA,IAAM,YAAY,oBAAI,QAAQ;AAuBvB,IAAM,YAAY,CAAC,YAAU;AAChC,MAAI,MAAW,oBAAI,IAAI;AAEvB,MAAI,UAAU;AACd,SAAO;AACX;AAGO,SAAS,MAAM,QAAO,KAAK;AAG9B,MAAI,cAAc;AAEd,QAAI,SAAQ,UAAU,IAAI,MAAM;AAEhC,QAAI,CAAC,QAAQ;AAET,gBAAU,IAAI,QAAQ,SAAO,oBAAI,IAAI,CAAE;AAAA,IAC3C;AAGA,QAAI,MAAM,OAAO,IAAI,GAAG;AAExB,QAAI,CAAC,KAAK;AACN,aAAO,IAAI,KAAK,MAAM,UAAU,MAAI,OAAO,OAAO,GAAG,CAAC,CAAE;AAAA,IAC5D;AAIA,gBAAY,cAAa,GAAG;AAAA,EAChC;AACJ;AAGO,SAAS,QAAQ,QAAO,KAAI,UAAS,UAAU;AAGlD,MAAI,UAAU,UAAU,IAAI,MAAM;AAClC,MAAI,CAAC,SAAS;AAGV;AAAA,EACJ;AAIA,MAAI,MAAM,QAAQ,IAAI,GAAG;AACzB,MAAI,KAAK;AAIL,mBAAe,GAAG;AAAA,EACtB;AACJ;;;ACvEO,IAAM,kBAAmC;AAAA;AAAA,EAE5C,IAAI,QAAO,KAAI,UAAS;AACpB,QAAI,4CAAmC;AACnC,aAAO;AAAA,IACX;AAGA,UAAM,QAAO,GAAG;AAKhB,QAAI,MAAM,QAAQ,IAAI,QAAO,KAAI,QAAQ;AAGzC,QAAI,SAAS,GAAG,GAAG;AACf,YAAI,SAAS,GAAG;AAAA,IACpB;AACA,WAAO;AAAA,EACX;AAAA;AAAA,EAEA,IAAI,QAAO,KAAI,OAAM,UAAS;AAG1B,QAAI,WAAW,OAAO,GAAG;AAKzB,QAAI,SAAO,QAAQ,IAAI,QAAO,KAAI,OAAM,QAAQ;AAGhD,QAAI,aAAa,OAAO;AAGpB,cAAQ,QAAO,KAAI,OAAM,QAAQ;AAAA,IACrC;AAGA,WAAO;AAAA,EACX;AACJ;;;AC5CO,SAAS,SAAS,QAAQ;AAE7B,SAAO,qBAAqB,MAAM;AACtC;AAIA,IAAM,cAAa,oBAAI,QAAQ;AAG/B,SAAS,qBAAqB,QAAO;AAKjC,MAAI,CAAC,SAAS,MAAM,GAAG;AACnB,WAAO;AAAA,EACX;AAKA,MAAI,yCAAgC,GAAG;AAGnC,WAAO;AAAA,EACX;AAIA,QAAM,aAAa,YAAY,IAAI,MAAM;AACzC,MAAI,YAAY;AAGZ,WAAO;AAAA,EACX;AAKA,MAAI,QAAQ,IAAI,MAAM,QAAO,eAAe;AAI5C,cAAY,IAAI,QAAO,KAAK;AAE5B,SAAO;AACX;AAGO,SAAS,WAAW,KAAK;AAC5B,SAAO,SAAS,GAAG,IAAG,SAAS,GAAG,IAAI;AAC1C;;;ACrDO,SAAS,MAAM,OAAO;AACzB,SAAO,CAAC,EAAE,SAAS,MAAM;AAC7B;AAGO,IAAM,MAAK,CAAC,UAAQ;AAEvB,SAAO,UAAU,KAAK;AAC1B;AAGA,IAAM,YAAY,CAAC,UAAQ;AAEvB,SAAO,IAAI,QAAQ,KAAK;AAC5B;AAGO,IAAM,UAAN,MAAa;AAAA;AAAA,EAQhB,YAAmB,UAAS;AAAT;AANnB;AAAA,qBAAU;AAEV;AAAA,kBAAS;AAML,SAAK,SAAO,WAAW,QAAQ;AAAA,EACnC;AAAA;AAAA,EAEA,IAAI,QAAO;AAEP,kBAAc,IAAI;AAClB,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA,EAEA,IAAI,MAAM,UAAS;AAEf,QAAI,aAAa,KAAK,UAAU;AAE5B,WAAK,WAAS;AACd,WAAK,SAAO;AAEZ,sBAAgB,IAAI;AAAA,IACxB;AAAA,EACJ;AACJ;AAGO,IAAM,gBAAgB,CAACC,SAAM;AAGhC,MAAI,cAAc;AAEd,gBAAY,cAAcA,KAAI,MAAMA,KAAI,OAAK,UAAU,MAAIA,KAAI,MAAI,MAAS,CAAE;AAAA,EAClF;AACJ;AAGO,IAAM,kBAAkB,CAACA,SAAM;AAClC,MAAI,MAAMA,KAAI;AACd,MAAI,KAAK;AAEL,mBAAe,GAAG;AAAA,EACtB;AACJ;AAGA,IAAM,gBAAN,MAAoB;AAAA,EAGhB,YAAmB,SAAe,MAAK;AAApB;AAAe;AAAA,EAClC;AAAA,EACA,IAAI,QAAO;AACP,WAAO,KAAK,QAAQ,KAAK,IAAI;AAAA,EACjC;AAAA,EACA,IAAI,MAAM,UAAS;AACf,SAAK,QAAQ,KAAK,IAAI,IAAE;AAAA,EAC5B;AACJ;AAGO,SAAS,MAAM,QAAO,KAAK;AAE9B,SAAO,IAAI,cAAc,QAAO,GAAG;AACvC;AAGO,SAAS,OAAO,QAAO;AAE1B,QAAM,MAAM,CAAC;AAEb,WAAS,OAAO,QAAQ;AAEpB,QAAI,GAAG,IAAG,MAAM,QAAO,GAAG;AAAA,EAC9B;AACA,UAAQ,IAAI,GAAG;AAEf,SAAO;AACX;AAGO,SAAS,UAAU,eAAc;AACpC,SAAO,IAAI,MAAM,eAAc;AAAA,IAC3B,IAAI,QAAO,KAAI,UAAS;AACpB,UAAI,IAAI,QAAQ,IAAI,QAAO,KAAI,QAAQ;AACvC,aAAO,EAAE,YAAU,EAAE,QAAM;AAAA,IAC/B;AAAA,IACA,IAAI,QAAO,KAAI,OAAM,UAAS;AAE1B,UAAI,WAAW,OAAO,GAAG;AAEzB,UAAI,SAAS,WAAW;AAEpB,iBAAS,QAAQ;AACjB,eAAO;AAAA,MACX,OAAK;AAED,eAAO,QAAQ,IAAI,QAAO,KAAI,OAAM,QAAQ;AAAA,MAChD;AAAA,IACJ;AAAA,EACJ,CAAC;AACL;;;AC3HA,IAAM,kBAAN,MAAqB;AAAA;AAAA,EAOjB,YAAY,QAAc,QAAO;AAAP;AAEtB,SAAK,SAAS,IAAI;AAAA,MACd,MAAI,OAAO,KAAK,MAAM;AAAA,MACtB,MAAI;AAGA,wBAAgB,IAAI;AAAA,MACxB;AAAA,IACJ;AAAA,EACJ;AAAA,EACA,IAAI,QAAO;AAGP,kBAAc,IAAI;AAElB,QAAI,KAAK,OAAO,OAAO;AAGnB,WAAK,SAAS,KAAK,OAAO,IAAI;AAAA,IAClC;AAEA,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAI,MAAM,UAAS;AAEf,SAAK,OAAO,QAAQ;AAAA,EACxB;AAGJ;AAGO,SAAS,SAAS,iBAAiB;AAQtC,MAAI;AACJ,MAAI;AAEJ,MAAI,aAAa,WAAW,eAAe;AAE3C,MAAI,YAAY;AAEZ,aAAS;AACT,aAAS,MAAI;AAAA,IAAC;AAAA,EAClB,OAAK;AAED,aAAS,gBAAgB;AACzB,aAAS,gBAAgB;AAAA,EAC7B;AAGA,SAAO,IAAI,gBAAgB,QAAO,MAAM;AAC5C;;;AChEO,SAAS,MAAM,QAAO,UAAS,UAAQ,CAAC,GAAU;AAWrD,SAAO,QAAQ,QAAO,UAAS,OAAO;AAE1C;AAGO,SAAS,YAAY,QAAO,UAAQ,CAAC,GAAU;AAQlD,SAAO,QAAQ,QAAO,MAAK,OAAO;AACtC;AAGA,SAAS,SAAS,QAAO,OAAM,eAAa,GAAE,OAAK,oBAAI,IAAI,GAAE;AAEzD,MAAI,CAAC,SAAS,MAAM,GAAG;AAEnB,WAAO;AAAA,EACX;AAGA,MAAI,OAAO;AAEP,QAAI,gBAAc,OAAO;AAErB,aAAO;AAAA,IACX;AACA;AAAA,EACJ;AAIA,MAAI,KAAK,IAAI,MAAM,GAAG;AAGlB,WAAO;AAAA,EACX;AAGA,aAAW,OAAO,QAAQ;AACtB,aAAS,OAAO,GAAG,GAAE,OAAM,cAAa,IAAI;AAAA,EAChD;AACJ;AAGA,SAAS,QAAQ,QAAO,UAAS,EAAC,MAAK,UAAS,GAAG;AAQ/C,QAAM,iBAAiB,CAACC,YAAS,SAASA,SAAO,SAAO,QAAM,IAAE,MAAS;AAGzE,MAAI;AAEJ,MAAI,WAAW,MAAM,GAAG;AAEpB,aAAS,MAAI,eAAe,MAAM;AAAA,EACtC,WAAU,MAAM,MAAM,GAAG;AAErB,aAAS,MAAI,OAAO;AAAA,EACxB,WAAU,WAAW,MAAM,GAAG;AAE1B,aAAS;AAAA,EACb;AAGA,MAAI;AAEJ,WAAS,UAAU,IAAI;AAEnB,YAAQ,MAAI;AAER,SAAG;AAEH,cAAM;AAAA,IACV;AAAA,EACJ;AAEA,MAAI;AACJ,MAAI,YAAY,MAAI;AAGhB,QAAI,UAAU;AAEV,YAAM,WAAWC,QAAO,IAAI;AAE5B,UAAI,OAAO;AAGP,cAAM;AAAA,MACV;AAEA,eAAS,UAAS,UAAS,SAAS;AAEpC,iBAAS;AAAA,IACb,OAAK;AAGD,MAAAA,QAAO,IAAI;AAAA,IACf;AAAA,EACJ;AAGA,MAAIA,UAAQ,IAAI,eAAe,QAAO,SAAS;AAK/C,MAAI,UAAU;AAKV,QAAI,WAAW;AAGX,gBAAU;AAAA,IACd,OAAO;AAGH,iBAAUA,QAAO,IAAI;AAAA,IACzB;AAAA,EACJ,OAAK;AAED,IAAAA,QAAO,IAAI;AAAA,EACf;AAGA,QAAM,UAAU,MAAI;AAChB,IAAAA,QAAO,KAAK;AAAA,EAChB;AAEA,SAAO;AACX;",
  "names": ["effect", "ref", "source", "effect"]
}
